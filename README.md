# AutoTest 自动化测试平台

## 项目概述

**AutoTest** 是一款基于 Android 的自动化测试平台，支持通过 HTTP API 接口实现对 Android 设备的远程控制和自动化测试。

### 核心功能

- **HTTP API 服务**：提供 RESTful API 接口进行设备控制
- **自动化测试**：支持截图、屏幕点击、滑动、输入等操作
- **设备管理**：多设备添加、远程控制管理
- **用户登录**：支持账号系统和本地数据库管理

---

## 目录
- [使用指南](#使用指南)
- [API 接口文档](#api-接口文档)
- [常见问题](#常见问题)

---

## 使用指南

### 安装应用

1. 将 APK 文件安装到 Android 设备
2. 首次启动需要授予必要的权限


#### HTTP API 测试

1. 确保自动化测试服务已启动
2. 通过 HTTP 请求调用 API：
   ```bash
   curl http://<手机IP>:9528/status
   ```

### 功能模块说明

#### 1. 自动化测试服务
- 显示服务连接状态

#### 2. 自动化测试守护进程
- **配对**：与设备进行无线调试配对
- **应用端口**：修改 ADB 端口后重新连接
- **启动/停止守护**：控制守护进程运行状态

#### 3. 日志管理
- **导出日志**：将日志导出到 `/Downloads/wy-autotest/` 目录
- **清除日志**：清空所有日志文件
- 实时显示日志总大小

#### 4. 我的设备
- 查看已绑定的测试设备列表
- 添加新设备（设备名称 + IP 地址）
- 进入远程控制界面

#### 5. 远程控制
- 实时屏幕截图显示
- 支持点击屏幕进行控制
- 执行按键操作

---

## API 接口文档

服务运行在 `http://127.0.0.1:9528`（可配置）

### 状态接口

| 接口 | 方法 | 说明 |
|------|------|------|
| `/status` | GET | 获取服务状态 |

**响应示例：**
```json
{
  "success": true,
  "version": "1.5.1",
  "uid": 1000,
  "pid": 12345
}
```

### 设备控制接口

| 接口 | 方法 | 参数 | 说明 |
|------|------|------|------|
| `/shell` | POST | `command` | 执行 Shell 命令 |
| `/ui` | GET | - | 获取当前 UI 结构 |
| `/screenshot` | GET | - | 获取屏幕截图 |
| `/screen_size` | GET | - | 获取屏幕尺寸 |
| `/current_activity` | GET | - | 获取当前 Activity |
| `/tap` | POST | `x`, `y` | 点击屏幕 |
| `/swipe` | POST | `x1`, `y1`, `x2`, `y2`, `duration` | 滑动屏幕 |
| `/input` | POST | `text` | 输入文本 |
| `/key` | POST | `keycode` | 发送按键 |
| `/start_app` | POST | `package` | 启动应用 |
| `/stop_app` | POST | `package` | 停止应用 |
| `/find_and_tap` | POST | `text` | 查找文本并点击 |
| `/find_and_tap_by_id` | POST | `id` | 查找 ID 并点击 |
| `/exit` | POST | - | 退出服务 |

### 调用示例

```bash
# 执行点击
 curl -X POST http://127.0.0.1:9528/tap \
   -d "x=500&y=1000"

# 输入文本
curl -X POST http://127.0.0.1:9528/input \
  -d "text=Hello World"

# 按下返回键
curl -X POST http://127.0.0.1:9528/key \
  -d "keycode=4"
```

---

## 常见问题

### Q1: 无法配对设备？
- 确保手机已开启「无线调试」

### Q2: ADB 连接失败？
- 检查端口是否被占用
- 尝试修改ADB端口（如 5556）
- 确认防火墙设置

### Q3: 服务无法启动？
- 检查是否授予存储权限
- 查看日志获取更多错误信息

---

## 支持与反馈

如有问题或建议，请通过以下方式联系我们：

- Issue 提交：[GitHub Issues]
- 邮箱联系：[neo750101@163.com]

---


